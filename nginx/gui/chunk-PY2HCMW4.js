import{i as a,j as p,p as u}from"./chunk-HNYGO2PH.js";import{O as n,S as o,W as i,m as s}from"./chunk-MDE6PSU2.js";var c=class e{constructor(t,r){this.http=t;this.router=r}currentUser=new s(null);initCsrf(){return this.http.get("/api/auth/csrf/")}initUser(){this.http.get("/api/auth/accounts/").subscribe(t=>this.currentUser.next(t))}logout(){this.http.post("/api/auth/logout/",{},{withCredentials:!0}).subscribe({next:()=>{this.currentUser.next(null),this.router.navigate(["/"])},error:()=>{this.currentUser.next(null),this.router.navigate(["/"])}})}login(t,r){let h=new a().set("username",t).set("password",r);return this.http.post("/api/auth/login/?next=/api/auth/accounts/",h,{withCredentials:!0}).pipe(n(l=>this.currentUser.next(l)))}static \u0275fac=function(r){return new(r||e)(i(p),i(u))};static \u0275prov=o({token:e,factory:e.\u0275fac,providedIn:"root"})};export{c as a};
